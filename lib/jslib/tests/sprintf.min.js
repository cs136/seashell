!function(e){function n(){var e=arguments[0],r=n.cache;return r[e]&&r.hasOwnProperty(e)||(r[e]=n.parse(e)),n.format.call(null,r[e],arguments)}function r(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,n){return Array(n+1).join(e)}var i={not_string:/[^s]/,number:/[dief]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fiosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};n.format=function(e,s){var a,o,l,f,c,p,u,d=1,g=e.length,h="",x=[],b=!0,y="";for(o=0;g>o;o++)if(h=r(e[o]),"string"===h)x[x.length]=e[o];else if("array"===h){if(f=e[o],f[2])for(a=s[d],l=0;l<f[2].length;l++){if(!a.hasOwnProperty(f[2][l]))throw new Error(n("[sprintf] property '%s' does not exist",f[2][l]));a=a[f[2][l]]}else a=f[1]?s[f[1]]:s[d++];if("function"==r(a)&&(a=a()),i.not_string.test(f[8])&&"number"!=r(a)&&isNaN(a))throw new TypeError(n("[sprintf] expecting number but found %s",r(a)));switch(i.number.test(f[8])&&(b=a>=0),f[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"e":a=f[7]?a.toExponential(f[7]):a.toExponential();break;case"f":a=f[7]?parseFloat(a).toFixed(f[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&f[7]?a.substring(0,f[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}!i.number.test(f[8])||b&&!f[3]?y="":(y=b?"+":"-",a=a.toString().replace(i.sign,"")),p=f[4]?"0"===f[4]?"0":f[4].charAt(1):" ",u=f[6]-(y+a).length,c=f[6]&&u>0?t(p,u):"",x[x.length]=f[5]?y+a+c:"0"===p?y+c+a:c+y+a}return x.join("")},n.cache={},n.parse=function(e){for(var n=e,r=[],t=[],s=0;n;){if(null!==(r=i.text.exec(n)))t[t.length]=r[0];else if(null!==(r=i.modulo.exec(n)))t[t.length]="%";else{if(null===(r=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){s|=1;var a=[],o=r[2],l=[];if(null===(l=i.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=l[1];""!==(o=o.substring(l[0].length));)if(null!==(l=i.key_access.exec(o)))a[a.length]=l[1];else{if(null===(l=i.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=l[1]}r[2]=a}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");t[t.length]=r}n=n.substring(r[0].length)}return t};var s=function(e,r,t){return t=(r||[]).slice(0),t.splice(0,0,e),n.apply(null,t)};"undefined"!=typeof exports?(exports.sprintf=n,exports.vsprintf=s):(e.sprintf=n,e.vsprintf=s,"function"==typeof define&&define.amd&&define(function(){return{sprintf:n,vsprintf:s}}))}("undefined"==typeof window?this:window);